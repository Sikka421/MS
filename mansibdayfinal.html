<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Mansi ‚ú®</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;600&family=Great+Vibes&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --p2: #ff4d6d; --gold: #d4af37; }
        
        body, html { 
            margin: 0; padding: 0; height: 100%; overflow: hidden; 
            font-family: 'Poppins', sans-serif; 
            /* Animated Magical Gradient Background */
            background: linear-gradient(-45deg, #0a0a0a, #2d0010, #1a0033, #000000);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Twinkling Star Layer */
        .stars-overlay {
            position: fixed; inset: 0;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, #fff, rgba(0,0,0,0)),
                radial-gradient(1.5px 1.5px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 50px 160px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 90px 40px, #fff, rgba(0,0,0,0));
            background-size: 200px 200px;
            animation: starsAnim 4s linear infinite;
            opacity: 0.4; z-index: 0;
        }

        @keyframes starsAnim {
            from { transform: translateY(0); }
            to { transform: translateY(-200px); }
        }

        .scene { position: absolute; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; z-index: 10; }
        .active-scene { display: flex; }

        .card-container { width: 280px; height: 380px; perspective: 1000px; cursor: pointer; margin-bottom: 15px; z-index: 20; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); transform-style: preserve-3d; }
        .card-container.is-flipped .card-inner { transform: rotateY(180deg); }
        
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border: 10px solid white; border-bottom: 50px solid white; border-radius: 4px; box-shadow: 0 15px 35px rgba(0,0,0,0.6); box-sizing: border-box; }
        .card-front img { width: 100%; height: 100%; object-fit: cover; }
        .card-back { background: #fffcf9; transform: rotateY(180deg); display: flex; align-items: center; justify-content: center; padding: 25px; font-family: 'Dancing Script', cursive; font-size: 1.4rem; color: #333; background-image: url('https://www.transparenttextures.com/patterns/lined-paper.png'); }

        .hint-text { font-size: 0.9rem; color: #ff8fa3; margin-bottom: 10px; font-weight: 600; animation: flash 1.5s infinite; text-shadow: 0 0 10px rgba(255,143,163,0.5); }
        @keyframes flash { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        .emoji-bar { font-size: 1.6rem; margin-bottom: 15px; letter-spacing: 5px; filter: drop-shadow(0 0 8px rgba(255,255,255,0.4)); }

        .btn { background: var(--p2); color: white; border: none; padding: 12px 35px; border-radius: 50px; cursor: pointer; font-weight: 600; font-size: 1rem; z-index: 20; box-shadow: 0 4px 15px rgba(0,0,0,0.5); transition: 0.3s; }
        .btn:hover { transform: scale(1.05); background: #ff1a43; }

        #cake-scene { display: none; z-index: 200; color: white; }
        .cake { position: relative; width: 160px; height: 120px; background: #fce1e4; border-radius: 10px 10px 0 0; margin-top: 50px; border: 1px solid #ffccd5; }
        .candle { position: absolute; width: 10px; height: 45px; background: #fff; top: -45px; left: 75px; border-radius: 3px; }
        .flame { position: absolute; width: 16px; height: 26px; background: #ffaa00; top: -26px; left: -3px; border-radius: 50% 50% 20% 20%; box-shadow: 0 0 25px #ffcc00; animation: flicker 0.1s infinite alternate; cursor: pointer; }

        #final-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: none; z-index: 400; flex-direction: column; align-items: center; justify-content: center; color: white; }
        .letter-paper { width: 85%; max-width: 450px; background: #fffdf5; color: #222; padding: 40px 30px; border-radius: 4px; font-family: 'Dancing Script', cursive; font-size: 1.25rem; line-height: 1.5; transform: scale(0); border: 1px solid #e0d5b0; box-shadow: 0 0 30px rgba(255,255,255,0.1); }

        #galaxy-scene { position: fixed; inset: 0; background: radial-gradient(circle at center, #2d0010 0%, #000 100%); display: none; z-index: 500; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .galaxy-text { font-family: 'Great Vibes', cursive; font-size: clamp(2.2rem, 7vw, 3.5rem); color: var(--gold); text-shadow: 0 0 20px rgba(255, 77, 109, 0.8); z-index: 501; opacity: 0; width: 90%; }
        
        #music-control { position: fixed; bottom: 15px; right: 15px; z-index: 10001; background: rgba(255,255,255,0.2); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 1.3rem; border: 1.5px solid rgba(255,255,255,0.5); visibility: hidden; color: white; }
        .progress-bar { position: fixed; top: 0; left: 0; height: 5px; background: linear-gradient(to right, #ff4d6d, #ff8fa3); width: 0%; z-index: 1000; box-shadow: 0 0 10px var(--p2); }
    </style>
</head>
<body onclick="spawnHeart(event)">

    <div class="stars-overlay"></div>

    <audio id="bgAudio" loop preload="auto">
        <source src="https://files.catbox.moe/yixqxl.mp3" type="audio/mpeg">
    </audio>

    <div id="music-control" onclick="toggleMusic()">üéµ</div>
    <div class="progress-bar" id="progress"></div>

    <section class="scene active-scene" id="scene-0">
        <h1 style="font-family: 'Great Vibes'; font-size: 3.5rem; color: #fff; margin: 0; text-shadow: 0 0 15px var(--p2);">This is for you meri Mansi</h1>
        <p style="font-size: 1rem; color: #ddd; margin-bottom: 30px; letter-spacing: 1px;">From my heart to yours...</p>
        <button class="btn" onclick="startStory()">Open My Heart ‚ù§Ô∏è</button>
    </section>

    <div id="photo-scenes-container"></div>

    <div id="cake-scene" class="scene">
        <h2 style="font-family: 'Great Vibes'; font-size: 3rem; color: #ffb3c1;">Make a wish, Mansi...</h2>
        <div class="cake">
            <div class="candle"><div class="flame" id="main-flame" onclick="blowCandle()"></div></div>
        </div>
        <p style="margin-top: 50px; font-size: 0.9rem; color: #bbb;">(Tap the flame to blow it out)</p>
    </div>

    <div id="final-overlay">
        <div class="letter-paper" id="letter">
            <p id="typewriter-text" style="white-space: pre-wrap;"></p>
            <p style="text-align: right; margin-top: 20px; font-weight: bold; color: var(--p2);">- Shiva ‚ù§Ô∏è</p>
            <button id="galaxy-btn" class="btn" style="display:none; margin: 15px auto 0;" onclick="startGalaxy()">One Last Thing... ‚ú®</button>
        </div>
    </div>

    <div id="galaxy-scene">
        <h1 class="galaxy-text" id="final-msg">You're The best person of my life<br>Love you always ‚ù£Ô∏è</h1>
    </div>

    <script>
        const audio = document.getElementById('bgAudio');
        const imageUrls = [
            "https://i.ibb.co/pBZD5dMT/mansi8472026-02-18-09-25-08b27ee408-2c8c-4f80-8249-00a983fbde53.jpg",
            "https://i.ibb.co/Z1c9qSJJ/mansi8472026-02-18-09-23-41c2bad4ce-3e47-4405-b305-fb3df0697b82.jpg",
            "https://i.ibb.co/rLzmpKr/mansi8472026-02-18-09-23-57944c267f-74d2-4bd2-a468-b448da06b63a.webp",
            "https://i.ibb.co/PGZSc36M/mansi8472026-02-18-09-24-075d40449f-9f7b-4a4d-8efc-dd9bb164f2e4.webp",
            "https://i.ibb.co/N6MyZzzb/mansi8472026-02-18-09-24-162ee1ae60-d588-422d-9d42-57b55e6a4b21.jpg",
            "https://i.ibb.co/9knHQ2Bn/mansi8472026-02-18-09-24-24419093ca-ca39-4c51-9a57-15e01930e874.jpg",
            "https://i.ibb.co/nxJkmhS/mansi8472026-02-18-09-25-1840f6a588-3517-4bf7-9890-88e6d4b27e45.webp",
            "https://i.ibb.co/hF6w7XvT/mansi8472026-02-18-09-25-26817c6556-6c30-4095-9698-88e6d4b27e45.webp",
            "https://i.ibb.co/RGDHbBFJ/mansi8472026-02-18-09-25-342a42dbc3-317c-461f-9930-969dfbc5cb24.jpg",
            "https://i.ibb.co/nNr0VnnC/mansi8472026-02-18-09-25-43eab30151-9a52-4d4e-afa5-6ada2eade31d.jpg",
            "https://i.ibb.co/fYHf8mQG/mansi8472026-02-18-09-25-536273dab2-ef03-4500-ba98-2bf5ce53e883.jpg",
            "https://i.ibb.co/fd9d1GNX/mansi8472026-02-18-09-26-114491a015-f037-4802-bbac-072a17142ab9.webp",
            "https://i.ibb.co/LzRjJ55V/mansi8472026-02-18-09-26-220248f4bc-61c4-4d97-b40a-c597f17c31be.jpg",
            "https://i.ibb.co/mVXH0Vh7/mansi8472026-02-18-09-26-31fe204edc-ac55-4b13-a0f4-2d83a5f94530.jpg",
            "https://i.ibb.co/Kxv0ZrH6/mansi8472026-02-18-09-26-40100d0e39-51e3-4eec-bfeb-6f8d9a93230a.jpg",
            "https://i.ibb.co/nsBqhyrR/IMG-20260218-121150.jpg",
            "https://i.ibb.co/N6bHjFPH/mansi8472026-02-18-09-26-5692c5d386-2ed7-49e1-b1c5-211e5e972b42.webp"
        ];

        const notes = ["Mansi, your grace is unmatched. ‚ú®", "That smile is my favorite story.", "The camera simply adores you!", "Style and elegance in one frame.", "I love this look on you! ‚ù§Ô∏è", "Breathtakingly beautiful.", "Pure elegance in every detail.", "Always shining, always you.", "Simply stunning, Mansi.", "One of my favorite shots!", "Radiating so much light.", "A literal work of art.", "Keep that beautiful confidence.", "You define what beauty is.", "Captivating as ever.", "Just one more surprise to go...", "The final piece. Ready?"];
        const emojiSets = ["‚ú®üíñ‚ú®", "üå∏üëëüå∏", "üéÄü¶ãüéÄ", "üç≠üéàüç≠", "üåüüåªüåü", "üç´üß∏üç´", "üåàüçìüåà", "üíéüïäÔ∏èüíé", "üå∫üåôüå∫", "üßÅüå∑üßÅ", "üí´üçíüí´", "üéêüçÄüéê", "ü©∞üßÅü©∞", "üçä‚òÄÔ∏èüçä", "üçÉüéêüçÉ", "ü•ÇüéÅü•Ç", "üî•‚ù§Ô∏èüî•"];

        let currentScene = 0;
        const container = document.getElementById('photo-scenes-container');

        imageUrls.forEach((url, i) => {
            const section = document.createElement('section');
            section.className = 'scene';
            section.id = `scene-${i + 1}`;
            section.innerHTML = `
                <p class="hint-text">Tap the photo üëÜ</p>
                <div class="card-container" onclick="this.classList.toggle('is-flipped')">
                    <div class="card-inner">
                        <div class="card-face card-front"><img src="${url}"></div>
                        <div class="card-face card-back"><p>${notes[i]}</p></div>
                    </div>
                </div>
                <div class="emoji-bar">${emojiSets[i]}</div>
                <button class="btn" onclick="nextScene()">${i === 16 ? 'Unlock Final Surprise üéÅ' : 'Next ‚û°'}</button>
            `;
            container.appendChild(section);
        });

        function startStory() {
            audio.play();
            document.getElementById('music-control').style.visibility = 'visible';
            nextScene();
        }

        function toggleMusic() { audio.paused ? audio.play() : audio.pause(); }

        function nextScene() {
            const current = document.getElementById(`scene-${currentScene}`);
            currentScene++;
            document.getElementById('progress').style.width = (currentScene / 18 * 100) + "%";
            if (currentScene > 17) {
                gsap.to(current, { opacity: 0, duration: 0.5, onComplete: () => {
                    current.classList.remove('active-scene');
                    document.getElementById('cake-scene').style.display = 'flex';
                }});
                return;
            }
            const next = document.getElementById(`scene-${currentScene}`);
            gsap.to(current, { opacity: 0, x: -80, scale: 0.9, duration: 0.5, onComplete: () => {
                current.classList.remove('active-scene');
                next.classList.add('active-scene');
                gsap.fromTo(next, { opacity: 0, x: 80, scale: 1.1 }, { opacity: 1, x: 0, scale: 1, duration: 0.6 });
            }});
        }

        function blowCandle() {
            document.getElementById('main-flame').style.display = 'none';
            confetti({ particleCount: 200, spread: 70, origin: { y: 0.6 } });
            setTimeout(() => {
                document.getElementById('cake-scene').style.display = 'none';
                showFinalLetter();
            }, 1000);
        }

        function showFinalLetter() {
            document.getElementById('final-overlay').style.display = 'flex';
            gsap.to("#letter", { scale: 1, duration: 0.8 });
            const text = "Mansi,\nshayad tu mujhe sirf dost maanti hai‚Ä¶\npar tu mere liye usse kahin zyada hai.\nSach kahu to mujhe nahi pata tu mere baare mein kya sochti hai,\npar tu meri life ka bahut special part hai.\nMain tujhse pyaar karta hu,\npar sabse zyada teri khushi chahta hu.\nBas tu hamesha khush reh, mast reh,\nteri har wish puri ho. üå∏\nMeri taraf se bahut saari wishes‚Ä¶\nHappy Birthday Mansi. üéÇüíõ";
            let i = 0;
            function type() { 
                if (i < text.length) { 
                    document.getElementById('typewriter-text').innerHTML += text.charAt(i); 
                    i++; 
                    setTimeout(type, 45); 
                } else { gsap.to("#galaxy-btn", { display: 'block', opacity: 1, duration: 1 }); }
            }
            type();
        }

        function startGalaxy() {
            gsap.to("#final-overlay", { opacity: 0, duration: 1, onComplete: () => {
                document.getElementById('galaxy-scene').style.display = 'flex';
                gsap.to("#final-msg", { opacity: 1, scale: 1, duration: 2 });
                setInterval(() => {
                    confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 } });
                    confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 } });
                }, 1000);
            }});
        }

        function spawnHeart(e) {
            const h = document.createElement("div"); h.innerHTML = "üíñ";
            h.style.cssText = `position:fixed; left:${e.clientX}px; top:${e.clientY}px; pointer-events:none; z-index:99999;`;
            document.body.appendChild(h);
            gsap.to(h, { y: -100, opacity: 0, duration: 1, onComplete: () => h.remove() });
        }
    </script>
</body>
</html>
